{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chris/OneDrive/Desktop/pleasegod/my-next-app/app/components/FileDropzone.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useState } from \"react\";\r\nimport { useDropzone } from \"react-dropzone\";\r\n\r\ninterface FileDropzoneProps {\r\n  onFileSelect?: (file: File) => void;\r\n  onFileTranscribed?: (text: string) => void; // new callback for transcribed text\r\n}\r\n\r\nexport default function FileDropzone({ onFileSelect, onFileTranscribed }: FileDropzoneProps) {\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [transcribing, setTranscribing] = useState(false);\r\n\r\nconst onDrop = useCallback(\r\n  async (acceptedFiles: File[]) => {\r\n    const selected = acceptedFiles[0];\r\n    if (!selected) return;\r\n\r\n    // 1️⃣ Save the file locally in state\r\n    setFile(selected);\r\n    onFileSelect?.(selected);\r\n\r\n    // 2️⃣ Only attempt transcription if it's an MP3 file\r\n    if (selected.type === \"audio/mpeg\") {\r\n      setTranscribing(true);\r\n\r\n      try {\r\n        // 3️⃣ Use FormData to send the file to the backend\r\n        const formData = new FormData();\r\n        formData.append(\"file\", selected);\r\n\r\n        // 4️⃣ Log the file name for debugging\r\n        console.log(\"Uploading file for transcription:\", selected.name);\r\n\r\n        const res = await fetch(\"/api/transcribe\", {\r\n          method: \"POST\",\r\n          body: formData,\r\n        });\r\n\r\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n\r\n        // 5️⃣ Parse JSON response\r\n        const data = await res.json();\r\n\r\n        // 6️⃣ Check if transcript exists, fallback to empty string\r\n        const transcript = data.transcript || \"\";\r\n\r\n        // 7️⃣ Send transcription back to parent component\r\n        onFileTranscribed?.(transcript);\r\n\r\n        // 8️⃣ Optional: log transcript for debugging\r\n        console.log(\"Transcription result:\", transcript);\r\n      } catch (err) {\r\n        console.error(\"Failed to transcribe file:\", err);\r\n      } finally {\r\n        setTranscribing(false);\r\n      }\r\n    }\r\n  },\r\n  [onFileSelect, onFileTranscribed]\r\n);\r\n\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    multiple: false,\r\n    accept: {\r\n      \"audio/mpeg\": [\".mp3\"],\r\n      \"video/mp4\": [\".mp4\"],\r\n    },\r\n  });\r\n\r\n  return (\r\n    <div\r\n      {...getRootProps()}\r\n      className={`flex flex-col items-center justify-center border-2 rounded-2xl p-6 w-full max-w-md cursor-pointer transition-all duration-300\r\n        ${\r\n          isDragActive\r\n            ? \"border-pink-400 bg-pink-50/20 shadow-[0_0_20px_rgba(255,105,180,0.5)]\"\r\n            : \"border-pink-300 bg-pink-50/10 hover:shadow-[0_0_15px_rgba(255,105,180,0.3)]\"\r\n        }\r\n        backdrop-blur-sm`}\r\n    >\r\n      <input {...getInputProps()} />\r\n      {file ? (\r\n        <p className=\"text-pink-200 font-medium text-center wrap-break-words\">\r\n          {file.name} {transcribing && \"(Transcribing...)\"}\r\n        </p>\r\n      ) : (\r\n        <p className=\"text-pink-100 text-center\">\r\n          {isDragActive\r\n            ? \"Drop your MP3 or MP4 file here...\"\r\n            : \"Click or drag to select your file\"}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAUe,SAAS,aAAa,EAAE,YAAY,EAAE,iBAAiB,EAAqB;;IACzF,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAC9C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEnD,MAAM,SAAS,IAAA,4KAAW;4CACxB,OAAO;YACL,MAAM,WAAW,aAAa,CAAC,EAAE;YACjC,IAAI,CAAC,UAAU;YAEf,qCAAqC;YACrC,QAAQ;YACR,eAAe;YAEf,qDAAqD;YACrD,IAAI,SAAS,IAAI,KAAK,cAAc;gBAClC,gBAAgB;gBAEhB,IAAI;oBACF,mDAAmD;oBACnD,MAAM,WAAW,IAAI;oBACrB,SAAS,MAAM,CAAC,QAAQ;oBAExB,sCAAsC;oBACtC,QAAQ,GAAG,CAAC,qCAAqC,SAAS,IAAI;oBAE9D,MAAM,MAAM,MAAM,MAAM,mBAAmB;wBACzC,QAAQ;wBACR,MAAM;oBACR;oBAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;oBAEjD,0BAA0B;oBAC1B,MAAM,OAAO,MAAM,IAAI,IAAI;oBAE3B,2DAA2D;oBAC3D,MAAM,aAAa,KAAK,UAAU,IAAI;oBAEtC,kDAAkD;oBAClD,oBAAoB;oBAEpB,6CAA6C;oBAC7C,QAAQ,GAAG,CAAC,yBAAyB;gBACvC,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,8BAA8B;gBAC9C,SAAU;oBACR,gBAAgB;gBAClB;YACF;QACF;2CACA;QAAC;QAAc;KAAkB;IAIjC,MAAM,EAAE,YAAY,EAAE,aAAa,EAAE,YAAY,EAAE,GAAG,IAAA,0LAAW,EAAC;QAChE;QACA,UAAU;QACV,QAAQ;YACN,cAAc;gBAAC;aAAO;YACtB,aAAa;gBAAC;aAAO;QACvB;IACF;IAEA,qBACE,6LAAC;QACE,GAAG,cAAc;QAClB,WAAW,CAAC;QACV,EACE,eACI,0EACA,8EACL;wBACe,CAAC;;0BAEnB,6LAAC;gBAAO,GAAG,eAAe;;;;;;YACzB,qBACC,6LAAC;gBAAE,WAAU;;oBACV,KAAK,IAAI;oBAAC;oBAAE,gBAAgB;;;;;;qCAG/B,6LAAC;gBAAE,WAAU;0BACV,eACG,sCACA;;;;;;;;;;;;AAKd;GAxFwB;;QAsDgC,0LAAW;;;KAtD3C","debugId":null}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chris/OneDrive/Desktop/pleasegod/my-next-app/app/components/Background.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useRef } from 'react';\r\nimport * as THREE from 'three';\r\n\r\nexport interface LiquidEtherProps {\r\n  mouseForce?: number;\r\n  cursorSize?: number;\r\n  isViscous?: boolean;\r\n  viscous?: number;\r\n  iterationsViscous?: number;\r\n  iterationsPoisson?: number;\r\n  dt?: number;\r\n  BFECC?: boolean;\r\n  resolution?: number;\r\n  isBounce?: boolean;\r\n  colors?: string[];\r\n  style?: React.CSSProperties;\r\n  className?: string;\r\n  autoDemo?: boolean;\r\n  autoSpeed?: number;\r\n  autoIntensity?: number;\r\n  takeoverDuration?: number;\r\n  autoResumeDelay?: number;\r\n  autoRampDuration?: number;\r\n}\r\n\r\ninterface SimOptions {\r\n  iterations_poisson: number;\r\n  iterations_viscous: number;\r\n  mouse_force: number;\r\n  resolution: number;\r\n  cursor_size: number;\r\n  viscous: number;\r\n  isBounce: boolean;\r\n  dt: number;\r\n  isViscous: boolean;\r\n  BFECC: boolean;\r\n}\r\n\r\ninterface LiquidEtherWebGL {\r\n  output?: { simulation?: { options: SimOptions; resize: () => void } };\r\n  autoDriver?: {\r\n    enabled: boolean;\r\n    speed: number;\r\n    resumeDelay: number;\r\n    rampDurationMs: number;\r\n    mouse?: { autoIntensity: number; takeoverDuration: number };\r\n    forceStop: () => void;\r\n  };\r\n  resize: () => void;\r\n  start: () => void;\r\n  pause: () => void;\r\n  dispose: () => void;\r\n}\r\n\r\nconst defaultColors = ['#5227FF', '#FF9FFC', '#B19EEF'];\r\n\r\nexport default function LiquidEther({\r\n  mouseForce = 20,\r\n  cursorSize = 100,\r\n  isViscous = false,\r\n  viscous = 30,\r\n  iterationsViscous = 32,\r\n  iterationsPoisson = 32,\r\n  dt = 0.014,\r\n  BFECC = true,\r\n  resolution = 0.5,\r\n  isBounce = false,\r\n  colors = defaultColors,\r\n  style = {},\r\n  className = '',\r\n  autoDemo = true,\r\n  autoSpeed = 0.5,\r\n  autoIntensity = 2.2,\r\n  takeoverDuration = 0.25,\r\n  autoResumeDelay = 1000,\r\n  autoRampDuration = 0.6\r\n}: LiquidEtherProps): React.ReactElement {\r\n  const mountRef = useRef<HTMLDivElement | null>(null);\r\n  const webglRef = useRef<LiquidEtherWebGL | null>(null);\r\n  const resizeObserverRef = useRef<ResizeObserver | null>(null);\r\n  const rafRef = useRef<number | null>(null);\r\n  const intersectionObserverRef = useRef<IntersectionObserver | null>(null);\r\n  const isVisibleRef = useRef<boolean>(true);\r\n  const resizeRafRef = useRef<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!mountRef.current) return;\r\n\r\n    function makePaletteTexture(stops: string[]): THREE.DataTexture {\r\n      let arr: string[];\r\n      if (Array.isArray(stops) && stops.length > 0) {\r\n        arr = stops.length === 1 ? [stops[0], stops[0]] : stops;\r\n      } else {\r\n        arr = ['#ffffff', '#ffffff'];\r\n      }\r\n      const w = arr.length;\r\n      const data = new Uint8Array(w * 4);\r\n      for (let i = 0; i < w; i++) {\r\n        const c = new THREE.Color(arr[i]);\r\n        data[i * 4 + 0] = Math.round(c.r * 255);\r\n        data[i * 4 + 1] = Math.round(c.g * 255);\r\n        data[i * 4 + 2] = Math.round(c.b * 255);\r\n        data[i * 4 + 3] = 255;\r\n      }\r\n      const tex = new THREE.DataTexture(data, w, 1, THREE.RGBAFormat);\r\n      tex.magFilter = THREE.LinearFilter;\r\n      tex.minFilter = THREE.LinearFilter;\r\n      tex.wrapS = THREE.ClampToEdgeWrapping;\r\n      tex.wrapT = THREE.ClampToEdgeWrapping;\r\n      tex.generateMipmaps = false;\r\n      tex.needsUpdate = true;\r\n      return tex;\r\n    }\r\n\r\n    const paletteTex = makePaletteTexture(colors);\r\n    // Hard-code transparent background vector (alpha 0)\r\n    const bgVec4 = new THREE.Vector4(0, 0, 0, 0);\r\n\r\n    class CommonClass {\r\n      width = 0;\r\n      height = 0;\r\n      aspect = 1;\r\n      pixelRatio = 1;\r\n      isMobile = false;\r\n      breakpoint = 768;\r\n      fboWidth: number | null = null;\r\n      fboHeight: number | null = null;\r\n      time = 0;\r\n      delta = 0;\r\n      container: HTMLElement | null = null;\r\n      renderer: THREE.WebGLRenderer | null = null;\r\n      clock: THREE.Clock | null = null;\r\n      init(container: HTMLElement) {\r\n        this.container = container;\r\n        this.pixelRatio = Math.min(window.devicePixelRatio || 1, 2);\r\n        this.resize();\r\n        this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\r\n        // Always transparent\r\n        this.renderer.autoClear = false;\r\n        this.renderer.setClearColor(new THREE.Color(0x000000), 0);\r\n        this.renderer.setPixelRatio(this.pixelRatio);\r\n        this.renderer.setSize(this.width, this.height);\r\n        const el = this.renderer.domElement;\r\n        el.style.width = '100%';\r\n        el.style.height = '100%';\r\n        el.style.display = 'block';\r\n        this.clock = new THREE.Clock();\r\n        this.clock.start();\r\n      }\r\n      resize() {\r\n        if (!this.container) return;\r\n        const rect = this.container.getBoundingClientRect();\r\n        this.width = Math.max(1, Math.floor(rect.width));\r\n        this.height = Math.max(1, Math.floor(rect.height));\r\n        this.aspect = this.width / this.height;\r\n        if (this.renderer) this.renderer.setSize(this.width, this.height, false);\r\n      }\r\n      update() {\r\n        if (!this.clock) return;\r\n        this.delta = this.clock.getDelta();\r\n        this.time += this.delta;\r\n      }\r\n    }\r\n    const Common = new CommonClass();\r\n\r\n    class MouseClass {\r\n      mouseMoved = false;\r\n      coords = new THREE.Vector2();\r\n      coords_old = new THREE.Vector2();\r\n      diff = new THREE.Vector2();\r\n      timer: number | null = null;\r\n      container: HTMLElement | null = null;\r\n      isHoverInside = false;\r\n      hasUserControl = false;\r\n      isAutoActive = false;\r\n      autoIntensity = 2.0;\r\n      takeoverActive = false;\r\n      takeoverStartTime = 0;\r\n      takeoverDuration = 0.25;\r\n      takeoverFrom = new THREE.Vector2();\r\n      takeoverTo = new THREE.Vector2();\r\n      onInteract: (() => void) | null = null;\r\n      private _onMouseMove = this.onDocumentMouseMove.bind(this);\r\n      private _onTouchStart = this.onDocumentTouchStart.bind(this);\r\n      private _onTouchMove = this.onDocumentTouchMove.bind(this);\r\n      private _onMouseEnter = this.onMouseEnter.bind(this);\r\n      private _onMouseLeave = this.onMouseLeave.bind(this);\r\n      private _onTouchEnd = this.onTouchEnd.bind(this);\r\n      init(container: HTMLElement) {\r\n        this.container = container;\r\n        container.addEventListener('mousemove', this._onMouseMove);\r\n        container.addEventListener('touchstart', this._onTouchStart, { passive: true });\r\n        container.addEventListener('touchmove', this._onTouchMove, { passive: true });\r\n        container.addEventListener('mouseenter', this._onMouseEnter);\r\n        container.addEventListener('mouseleave', this._onMouseLeave);\r\n        container.addEventListener('touchend', this._onTouchEnd);\r\n      }\r\n      dispose() {\r\n        const c = this.container;\r\n        if (!c) return;\r\n        c.removeEventListener('mousemove', this._onMouseMove);\r\n        c.removeEventListener('touchstart', this._onTouchStart);\r\n        c.removeEventListener('touchmove', this._onTouchMove);\r\n        c.removeEventListener('mouseenter', this._onMouseEnter);\r\n        c.removeEventListener('mouseleave', this._onMouseLeave);\r\n        c.removeEventListener('touchend', this._onTouchEnd);\r\n      }\r\n      setCoords(x: number, y: number) {\r\n        if (!this.container) return;\r\n        if (this.timer) window.clearTimeout(this.timer);\r\n        const rect = this.container.getBoundingClientRect();\r\n        const nx = (x - rect.left) / rect.width;\r\n        const ny = (y - rect.top) / rect.height;\r\n        this.coords.set(nx * 2 - 1, -(ny * 2 - 1));\r\n        this.mouseMoved = true;\r\n        this.timer = window.setTimeout(() => {\r\n          this.mouseMoved = false;\r\n        }, 100);\r\n      }\r\n      setNormalized(nx: number, ny: number) {\r\n        this.coords.set(nx, ny);\r\n        this.mouseMoved = true;\r\n      }\r\n      onDocumentMouseMove(event: MouseEvent) {\r\n        if (this.onInteract) this.onInteract();\r\n        if (this.isAutoActive && !this.hasUserControl && !this.takeoverActive) {\r\n          if (!this.container) return;\r\n          const rect = this.container.getBoundingClientRect();\r\n          const nx = (event.clientX - rect.left) / rect.width;\r\n          const ny = (event.clientY - rect.top) / rect.height;\r\n          this.takeoverFrom.copy(this.coords);\r\n          this.takeoverTo.set(nx * 2 - 1, -(ny * 2 - 1));\r\n          this.takeoverStartTime = performance.now();\r\n          this.takeoverActive = true;\r\n          this.hasUserControl = true;\r\n          this.isAutoActive = false;\r\n          return;\r\n        }\r\n        this.setCoords(event.clientX, event.clientY);\r\n        this.hasUserControl = true;\r\n      }\r\n      onDocumentTouchStart(event: TouchEvent) {\r\n        if (event.touches.length === 1) {\r\n          const t = event.touches[0];\r\n          if (this.onInteract) this.onInteract();\r\n          this.setCoords(t.pageX, t.pageY);\r\n          this.hasUserControl = true;\r\n        }\r\n      }\r\n      onDocumentTouchMove(event: TouchEvent) {\r\n        if (event.touches.length === 1) {\r\n          const t = event.touches[0];\r\n          if (this.onInteract) this.onInteract();\r\n          this.setCoords(t.pageX, t.pageY);\r\n        }\r\n      }\r\n      onTouchEnd() {\r\n        this.isHoverInside = false;\r\n      }\r\n      onMouseEnter() {\r\n        this.isHoverInside = true;\r\n      }\r\n      onMouseLeave() {\r\n        this.isHoverInside = false;\r\n      }\r\n      update() {\r\n        if (this.takeoverActive) {\r\n          const t = (performance.now() - this.takeoverStartTime) / (this.takeoverDuration * 1000);\r\n          if (t >= 1) {\r\n            this.takeoverActive = false;\r\n            this.coords.copy(this.takeoverTo);\r\n            this.coords_old.copy(this.coords);\r\n            this.diff.set(0, 0);\r\n          } else {\r\n            const k = t * t * (3 - 2 * t);\r\n            this.coords.copy(this.takeoverFrom).lerp(this.takeoverTo, k);\r\n          }\r\n        }\r\n        this.diff.subVectors(this.coords, this.coords_old);\r\n        this.coords_old.copy(this.coords);\r\n        if (this.coords_old.x === 0 && this.coords_old.y === 0) this.diff.set(0, 0);\r\n        if (this.isAutoActive && !this.takeoverActive) this.diff.multiplyScalar(this.autoIntensity);\r\n      }\r\n    }\r\n    const Mouse = new MouseClass();\r\n\r\n    class AutoDriver {\r\n      mouse: MouseClass;\r\n      manager: WebGLManager;\r\n      enabled: boolean;\r\n      speed: number;\r\n      resumeDelay: number;\r\n      rampDurationMs: number;\r\n      active = false;\r\n      current = new THREE.Vector2(0, 0);\r\n      target = new THREE.Vector2();\r\n      lastTime = performance.now();\r\n      activationTime = 0;\r\n      margin = 0.2;\r\n      private _tmpDir = new THREE.Vector2();\r\n      constructor(\r\n        mouse: MouseClass,\r\n        manager: WebGLManager,\r\n        opts: { enabled: boolean; speed: number; resumeDelay: number; rampDuration: number }\r\n      ) {\r\n        this.mouse = mouse;\r\n        this.manager = manager;\r\n        this.enabled = opts.enabled;\r\n        this.speed = opts.speed;\r\n        this.resumeDelay = opts.resumeDelay || 3000;\r\n        this.rampDurationMs = (opts.rampDuration || 0) * 1000;\r\n        this.pickNewTarget();\r\n      }\r\n      pickNewTarget() {\r\n        const r = Math.random;\r\n        this.target.set((r() * 2 - 1) * (1 - this.margin), (r() * 2 - 1) * (1 - this.margin));\r\n      }\r\n      forceStop() {\r\n        this.active = false;\r\n        this.mouse.isAutoActive = false;\r\n      }\r\n      update() {\r\n        if (!this.enabled) return;\r\n        const now = performance.now();\r\n        const idle = now - this.manager.lastUserInteraction;\r\n        if (idle < this.resumeDelay) {\r\n          if (this.active) this.forceStop();\r\n          return;\r\n        }\r\n        if (this.mouse.isHoverInside) {\r\n          if (this.active) this.forceStop();\r\n          return;\r\n        }\r\n        if (!this.active) {\r\n          this.active = true;\r\n          this.current.copy(this.mouse.coords);\r\n          this.lastTime = now;\r\n          this.activationTime = now;\r\n        }\r\n        if (!this.active) return;\r\n        this.mouse.isAutoActive = true;\r\n        let dtSec = (now - this.lastTime) / 1000;\r\n        this.lastTime = now;\r\n        if (dtSec > 0.2) dtSec = 0.016;\r\n        const dir = this._tmpDir.subVectors(this.target, this.current);\r\n        const dist = dir.length();\r\n        if (dist < 0.01) {\r\n          this.pickNewTarget();\r\n          return;\r\n        }\r\n        dir.normalize();\r\n        let ramp = 1;\r\n        if (this.rampDurationMs > 0) {\r\n          const t = Math.min(1, (now - this.activationTime) / this.rampDurationMs);\r\n          ramp = t * t * (3 - 2 * t);\r\n        }\r\n        const step = this.speed * dtSec * ramp;\r\n        const move = Math.min(step, dist);\r\n        this.current.addScaledVector(dir, move);\r\n        this.mouse.setNormalized(this.current.x, this.current.y);\r\n      }\r\n    }\r\n\r\n    const face_vert = `\r\n  attribute vec3 position;\r\n  uniform vec2 px;\r\n  uniform vec2 boundarySpace;\r\n  varying vec2 uv;\r\n  precision highp float;\r\n  void main(){\r\n  vec3 pos = position;\r\n  vec2 scale = 1.0 - boundarySpace * 2.0;\r\n  pos.xy = pos.xy * scale;\r\n  uv = vec2(0.5)+(pos.xy)*0.5;\r\n  gl_Position = vec4(pos, 1.0);\r\n}\r\n`;\r\n    const line_vert = `\r\n  attribute vec3 position;\r\n  uniform vec2 px;\r\n  precision highp float;\r\n  varying vec2 uv;\r\n  void main(){\r\n  vec3 pos = position;\r\n  uv = 0.5 + pos.xy * 0.5;\r\n  vec2 n = sign(pos.xy);\r\n  pos.xy = abs(pos.xy) - px * 1.0;\r\n  pos.xy *= n;\r\n  gl_Position = vec4(pos, 1.0);\r\n}\r\n`;\r\n    const mouse_vert = `\r\n    precision highp float;\r\n    attribute vec3 position;\r\n    attribute vec2 uv;\r\n    uniform vec2 center;\r\n    uniform vec2 scale;\r\n    uniform vec2 px;\r\n    varying vec2 vUv;\r\n    void main(){\r\n    vec2 pos = position.xy * scale * 2.0 * px + center;\r\n    vUv = uv;\r\n    gl_Position = vec4(pos, 0.0, 1.0);\r\n}\r\n`;\r\n    const advection_frag = `\r\n    precision highp float;\r\n    uniform sampler2D velocity;\r\n    uniform float dt;\r\n    uniform bool isBFECC;\r\n    uniform vec2 fboSize;\r\n    uniform vec2 px;\r\n    varying vec2 uv;\r\n    void main(){\r\n    vec2 ratio = max(fboSize.x, fboSize.y) / fboSize;\r\n    if(isBFECC == false){\r\n        vec2 vel = texture2D(velocity, uv).xy;\r\n        vec2 uv2 = uv - vel * dt * ratio;\r\n        vec2 newVel = texture2D(velocity, uv2).xy;\r\n        gl_FragColor = vec4(newVel, 0.0, 0.0);\r\n    } else {\r\n        vec2 spot_new = uv;\r\n        vec2 vel_old = texture2D(velocity, uv).xy;\r\n        vec2 spot_old = spot_new - vel_old * dt * ratio;\r\n        vec2 vel_new1 = texture2D(velocity, spot_old).xy;\r\n        vec2 spot_new2 = spot_old + vel_new1 * dt * ratio;\r\n        vec2 error = spot_new2 - spot_new;\r\n        vec2 spot_new3 = spot_new - error / 2.0;\r\n        vec2 vel_2 = texture2D(velocity, spot_new3).xy;\r\n        vec2 spot_old2 = spot_new3 - vel_2 * dt * ratio;\r\n        vec2 newVel2 = texture2D(velocity, spot_old2).xy; \r\n        gl_FragColor = vec4(newVel2, 0.0, 0.0);\r\n    }\r\n}\r\n`;\r\n    const color_frag = `\r\n    precision highp float;\r\n    uniform sampler2D velocity;\r\n    uniform sampler2D palette;\r\n    uniform vec4 bgColor;\r\n    varying vec2 uv;\r\n    void main(){\r\n    vec2 vel = texture2D(velocity, uv).xy;\r\n    float lenv = clamp(length(vel), 0.0, 1.0);\r\n    vec3 c = texture2D(palette, vec2(lenv, 0.5)).rgb;\r\n    vec3 outRGB = mix(bgColor.rgb, c, lenv);\r\n    float outA = mix(bgColor.a, 1.0, lenv);\r\n    gl_FragColor = vec4(outRGB, outA);\r\n}\r\n`;\r\n    const divergence_frag = `\r\n    precision highp float;\r\n    uniform sampler2D velocity;\r\n    uniform float dt;\r\n    uniform vec2 px;\r\n    varying vec2 uv;\r\n    void main(){\r\n    float x0 = texture2D(velocity, uv-vec2(px.x, 0.0)).x;\r\n    float x1 = texture2D(velocity, uv+vec2(px.x, 0.0)).x;\r\n    float y0 = texture2D(velocity, uv-vec2(0.0, px.y)).y;\r\n    float y1 = texture2D(velocity, uv+vec2(0.0, px.y)).y;\r\n    float divergence = (x1 - x0 + y1 - y0) / 2.0;\r\n    gl_FragColor = vec4(divergence / dt);\r\n}\r\n`;\r\n    const externalForce_frag = `\r\n    precision highp float;\r\n    uniform vec2 force;\r\n    uniform vec2 center;\r\n    uniform vec2 scale;\r\n    uniform vec2 px;\r\n    varying vec2 vUv;\r\n    void main(){\r\n    vec2 circle = (vUv - 0.5) * 2.0;\r\n    float d = 1.0 - min(length(circle), 1.0);\r\n    d *= d;\r\n    gl_FragColor = vec4(force * d, 0.0, 1.0);\r\n}\r\n`;\r\n    const poisson_frag = `\r\n    precision highp float;\r\n    uniform sampler2D pressure;\r\n    uniform sampler2D divergence;\r\n    uniform vec2 px;\r\n    varying vec2 uv;\r\n    void main(){\r\n    float p0 = texture2D(pressure, uv + vec2(px.x * 2.0, 0.0)).r;\r\n    float p1 = texture2D(pressure, uv - vec2(px.x * 2.0, 0.0)).r;\r\n    float p2 = texture2D(pressure, uv + vec2(0.0, px.y * 2.0)).r;\r\n    float p3 = texture2D(pressure, uv - vec2(0.0, px.y * 2.0)).r;\r\n    float div = texture2D(divergence, uv).r;\r\n    float newP = (p0 + p1 + p2 + p3) / 4.0 - div;\r\n    gl_FragColor = vec4(newP);\r\n}\r\n`;\r\n    const pressure_frag = `\r\n    precision highp float;\r\n    uniform sampler2D pressure;\r\n    uniform sampler2D velocity;\r\n    uniform vec2 px;\r\n    uniform float dt;\r\n    varying vec2 uv;\r\n    void main(){\r\n    float step = 1.0;\r\n    float p0 = texture2D(pressure, uv + vec2(px.x * step, 0.0)).r;\r\n    float p1 = texture2D(pressure, uv - vec2(px.x * step, 0.0)).r;\r\n    float p2 = texture2D(pressure, uv + vec2(0.0, px.y * step)).r;\r\n    float p3 = texture2D(pressure, uv - vec2(0.0, px.y * step)).r;\r\n    vec2 v = texture2D(velocity, uv).xy;\r\n    vec2 gradP = vec2(p0 - p1, p2 - p3) * 0.5;\r\n    v = v - gradP * dt;\r\n    gl_FragColor = vec4(v, 0.0, 1.0);\r\n}\r\n`;\r\n    const viscous_frag = `\r\n    precision highp float;\r\n    uniform sampler2D velocity;\r\n    uniform sampler2D velocity_new;\r\n    uniform float v;\r\n    uniform vec2 px;\r\n    uniform float dt;\r\n    varying vec2 uv;\r\n    void main(){\r\n    vec2 old = texture2D(velocity, uv).xy;\r\n    vec2 new0 = texture2D(velocity_new, uv + vec2(px.x * 2.0, 0.0)).xy;\r\n    vec2 new1 = texture2D(velocity_new, uv - vec2(px.x * 2.0, 0.0)).xy;\r\n    vec2 new2 = texture2D(velocity_new, uv + vec2(0.0, px.y * 2.0)).xy;\r\n    vec2 new3 = texture2D(velocity_new, uv - vec2(0.0, px.y * 2.0)).xy;\r\n    vec2 newv = 4.0 * old + v * dt * (new0 + new1 + new2 + new3);\r\n    newv /= 4.0 * (1.0 + v * dt);\r\n    gl_FragColor = vec4(newv, 0.0, 0.0);\r\n}\r\n`;\r\n\r\n    type Uniforms = Record<string, { value: any }>;\r\n\r\n    class ShaderPass {\r\n      props: any;\r\n      uniforms?: Uniforms;\r\n      scene: THREE.Scene | null = null;\r\n      camera: THREE.Camera | null = null;\r\n      material: THREE.RawShaderMaterial | null = null;\r\n      geometry: THREE.BufferGeometry | null = null;\r\n      plane: THREE.Mesh | null = null;\r\n      constructor(props: any) {\r\n        this.props = props || {};\r\n        this.uniforms = this.props.material?.uniforms;\r\n      }\r\n      init(..._args: any[]) {\r\n        this.scene = new THREE.Scene();\r\n        this.camera = new THREE.Camera();\r\n        if (this.uniforms) {\r\n          this.material = new THREE.RawShaderMaterial(this.props.material);\r\n          this.geometry = new THREE.PlaneGeometry(2, 2);\r\n          this.plane = new THREE.Mesh(this.geometry, this.material);\r\n          this.scene.add(this.plane);\r\n        }\r\n      }\r\n      update(..._args: any[]) {\r\n        if (!Common.renderer || !this.scene || !this.camera) return;\r\n        Common.renderer.setRenderTarget(this.props.output || null);\r\n        Common.renderer.render(this.scene, this.camera);\r\n        Common.renderer.setRenderTarget(null);\r\n      }\r\n    }\r\n\r\n    class Advection extends ShaderPass {\r\n      line!: THREE.LineSegments;\r\n      constructor(simProps: any) {\r\n        super({\r\n          material: {\r\n            vertexShader: face_vert,\r\n            fragmentShader: advection_frag,\r\n            uniforms: {\r\n              boundarySpace: { value: simProps.cellScale },\r\n              px: { value: simProps.cellScale },\r\n              fboSize: { value: simProps.fboSize },\r\n              velocity: { value: simProps.src.texture },\r\n              dt: { value: simProps.dt },\r\n              isBFECC: { value: true }\r\n            }\r\n          },\r\n          output: simProps.dst\r\n        });\r\n        this.uniforms = this.props.material.uniforms;\r\n        this.init();\r\n      }\r\n      init() {\r\n        super.init();\r\n        this.createBoundary();\r\n      }\r\n      createBoundary() {\r\n        const boundaryG = new THREE.BufferGeometry();\r\n        const vertices_boundary = new Float32Array([\r\n          -1, -1, 0, -1, 1, 0, -1, 1, 0, 1, 1, 0, 1, 1, 0, 1, -1, 0, 1, -1, 0, -1, -1, 0\r\n        ]);\r\n        boundaryG.setAttribute('position', new THREE.BufferAttribute(vertices_boundary, 3));\r\n        const boundaryM = new THREE.RawShaderMaterial({\r\n          vertexShader: line_vert,\r\n          fragmentShader: advection_frag,\r\n          uniforms: this.uniforms!\r\n        });\r\n        this.line = new THREE.LineSegments(boundaryG, boundaryM);\r\n        this.scene!.add(this.line);\r\n      }\r\n      update(...args: any[]) {\r\n        const { dt, isBounce, BFECC } = (args[0] || {}) as { dt?: number; isBounce?: boolean; BFECC?: boolean };\r\n        if (!this.uniforms) return;\r\n        if (typeof dt === 'number') this.uniforms.dt.value = dt;\r\n        if (typeof isBounce === 'boolean') this.line.visible = isBounce;\r\n        if (typeof BFECC === 'boolean') this.uniforms.isBFECC.value = BFECC;\r\n        super.update();\r\n      }\r\n    }\r\n\r\n    class ExternalForce extends ShaderPass {\r\n      mouse!: THREE.Mesh;\r\n      constructor(simProps: any) {\r\n        super({ output: simProps.dst });\r\n        this.init(simProps);\r\n      }\r\n      init(simProps: any) {\r\n        super.init();\r\n        const mouseG = new THREE.PlaneGeometry(1, 1);\r\n        const mouseM = new THREE.RawShaderMaterial({\r\n          vertexShader: mouse_vert,\r\n          fragmentShader: externalForce_frag,\r\n          blending: THREE.AdditiveBlending,\r\n          depthWrite: false,\r\n          uniforms: {\r\n            px: { value: simProps.cellScale },\r\n            force: { value: new THREE.Vector2(0, 0) },\r\n            center: { value: new THREE.Vector2(0, 0) },\r\n            scale: { value: new THREE.Vector2(simProps.cursor_size, simProps.cursor_size) }\r\n          }\r\n        });\r\n        this.mouse = new THREE.Mesh(mouseG, mouseM);\r\n        this.scene!.add(this.mouse);\r\n      }\r\n      update(...args: any[]) {\r\n        const props = args[0] || {};\r\n        const forceX = (Mouse.diff.x / 2) * (props.mouse_force || 0);\r\n        const forceY = (Mouse.diff.y / 2) * (props.mouse_force || 0);\r\n        const cellScale = props.cellScale || { x: 1, y: 1 };\r\n        const cursorSize = props.cursor_size || 0;\r\n        const cursorSizeX = cursorSize * cellScale.x;\r\n        const cursorSizeY = cursorSize * cellScale.y;\r\n        const centerX = Math.min(\r\n          Math.max(Mouse.coords.x, -1 + cursorSizeX + cellScale.x * 2),\r\n          1 - cursorSizeX - cellScale.x * 2\r\n        );\r\n        const centerY = Math.min(\r\n          Math.max(Mouse.coords.y, -1 + cursorSizeY + cellScale.y * 2),\r\n          1 - cursorSizeY - cellScale.y * 2\r\n        );\r\n        const uniforms = (this.mouse.material as THREE.RawShaderMaterial).uniforms;\r\n        uniforms.force.value.set(forceX, forceY);\r\n        uniforms.center.value.set(centerX, centerY);\r\n        uniforms.scale.value.set(cursorSize, cursorSize);\r\n        super.update();\r\n      }\r\n    }\r\n\r\n    class Viscous extends ShaderPass {\r\n      constructor(simProps: any) {\r\n        super({\r\n          material: {\r\n            vertexShader: face_vert,\r\n            fragmentShader: viscous_frag,\r\n            uniforms: {\r\n              boundarySpace: { value: simProps.boundarySpace },\r\n              velocity: { value: simProps.src.texture },\r\n              velocity_new: { value: simProps.dst_.texture },\r\n              v: { value: simProps.viscous },\r\n              px: { value: simProps.cellScale },\r\n              dt: { value: simProps.dt }\r\n            }\r\n          },\r\n          output: simProps.dst,\r\n          output0: simProps.dst_,\r\n          output1: simProps.dst\r\n        });\r\n        this.init();\r\n      }\r\n      update(...args: any[]) {\r\n        const { viscous, iterations, dt } = (args[0] || {}) as { viscous?: number; iterations?: number; dt?: number };\r\n        if (!this.uniforms) return;\r\n        let fbo_in: any, fbo_out: any;\r\n        if (typeof viscous === 'number') this.uniforms.v.value = viscous;\r\n        const iter = iterations ?? 0;\r\n        for (let i = 0; i < iter; i++) {\r\n          if (i % 2 === 0) {\r\n            fbo_in = this.props.output0;\r\n            fbo_out = this.props.output1;\r\n          } else {\r\n            fbo_in = this.props.output1;\r\n            fbo_out = this.props.output0;\r\n          }\r\n          this.uniforms.velocity_new.value = fbo_in.texture;\r\n          this.props.output = fbo_out;\r\n          if (typeof dt === 'number') this.uniforms.dt.value = dt;\r\n          super.update();\r\n        }\r\n        return fbo_out;\r\n      }\r\n    }\r\n\r\n    class Divergence extends ShaderPass {\r\n      constructor(simProps: any) {\r\n        super({\r\n          material: {\r\n            vertexShader: face_vert,\r\n            fragmentShader: divergence_frag,\r\n            uniforms: {\r\n              boundarySpace: { value: simProps.boundarySpace },\r\n              velocity: { value: simProps.src.texture },\r\n              px: { value: simProps.cellScale },\r\n              dt: { value: simProps.dt }\r\n            }\r\n          },\r\n          output: simProps.dst\r\n        });\r\n        this.init();\r\n      }\r\n      update(...args: any[]) {\r\n        const { vel } = (args[0] || {}) as { vel?: any };\r\n        if (this.uniforms && vel) {\r\n          this.uniforms.velocity.value = vel.texture;\r\n        }\r\n        super.update();\r\n      }\r\n    }\r\n\r\n    class Poisson extends ShaderPass {\r\n      constructor(simProps: any) {\r\n        super({\r\n          material: {\r\n            vertexShader: face_vert,\r\n            fragmentShader: poisson_frag,\r\n            uniforms: {\r\n              boundarySpace: { value: simProps.boundarySpace },\r\n              pressure: { value: simProps.dst_.texture },\r\n              divergence: { value: simProps.src.texture },\r\n              px: { value: simProps.cellScale }\r\n            }\r\n          },\r\n          output: simProps.dst,\r\n          output0: simProps.dst_,\r\n          output1: simProps.dst\r\n        });\r\n        this.init();\r\n      }\r\n      update(...args: any[]) {\r\n        const { iterations } = (args[0] || {}) as { iterations?: number };\r\n        let p_in: any, p_out: any;\r\n        const iter = iterations ?? 0;\r\n        for (let i = 0; i < iter; i++) {\r\n          if (i % 2 === 0) {\r\n            p_in = this.props.output0;\r\n            p_out = this.props.output1;\r\n          } else {\r\n            p_in = this.props.output1;\r\n            p_out = this.props.output0;\r\n          }\r\n          if (this.uniforms) this.uniforms.pressure.value = p_in.texture;\r\n          this.props.output = p_out;\r\n          super.update();\r\n        }\r\n        return p_out;\r\n      }\r\n    }\r\n\r\n    class Pressure extends ShaderPass {\r\n      constructor(simProps: any) {\r\n        super({\r\n          material: {\r\n            vertexShader: face_vert,\r\n            fragmentShader: pressure_frag,\r\n            uniforms: {\r\n              boundarySpace: { value: simProps.boundarySpace },\r\n              pressure: { value: simProps.src_p.texture },\r\n              velocity: { value: simProps.src_v.texture },\r\n              px: { value: simProps.cellScale },\r\n              dt: { value: simProps.dt }\r\n            }\r\n          },\r\n          output: simProps.dst\r\n        });\r\n        this.init();\r\n      }\r\n      update(...args: any[]) {\r\n        const { vel, pressure } = (args[0] || {}) as { vel?: any; pressure?: any };\r\n        if (this.uniforms && vel && pressure) {\r\n          this.uniforms.velocity.value = vel.texture;\r\n          this.uniforms.pressure.value = pressure.texture;\r\n        }\r\n        super.update();\r\n      }\r\n    }\r\n\r\n    class Simulation {\r\n      options: SimOptions;\r\n      fbos: Record<string, THREE.WebGLRenderTarget | null> = {\r\n        vel_0: null,\r\n        vel_1: null,\r\n        vel_viscous0: null,\r\n        vel_viscous1: null,\r\n        div: null,\r\n        pressure_0: null,\r\n        pressure_1: null\r\n      };\r\n      fboSize = new THREE.Vector2();\r\n      cellScale = new THREE.Vector2();\r\n      boundarySpace = new THREE.Vector2();\r\n      advection!: Advection;\r\n      externalForce!: ExternalForce;\r\n      viscous!: Viscous;\r\n      divergence!: Divergence;\r\n      poisson!: Poisson;\r\n      pressure!: Pressure;\r\n      constructor(options?: Partial<SimOptions>) {\r\n        this.options = {\r\n          iterations_poisson: 32,\r\n          iterations_viscous: 32,\r\n          mouse_force: 20,\r\n          resolution: 0.5,\r\n          cursor_size: 100,\r\n          viscous: 30,\r\n          isBounce: false,\r\n          dt: 0.014,\r\n          isViscous: false,\r\n          BFECC: true,\r\n          ...options\r\n        };\r\n        this.init();\r\n      }\r\n      init() {\r\n        this.calcSize();\r\n        this.createAllFBO();\r\n        this.createShaderPass();\r\n      }\r\n      getFloatType() {\r\n        const isIOS = /(iPad|iPhone|iPod)/i.test(navigator.userAgent);\r\n        return isIOS ? THREE.HalfFloatType : THREE.FloatType;\r\n      }\r\n      createAllFBO() {\r\n        const type = this.getFloatType();\r\n        const opts = {\r\n          type,\r\n          depthBuffer: false,\r\n          stencilBuffer: false,\r\n          minFilter: THREE.LinearFilter,\r\n          magFilter: THREE.LinearFilter,\r\n          wrapS: THREE.ClampToEdgeWrapping,\r\n          wrapT: THREE.ClampToEdgeWrapping\r\n        } as const;\r\n        for (const key in this.fbos) {\r\n          this.fbos[key] = new THREE.WebGLRenderTarget(this.fboSize.x, this.fboSize.y, opts);\r\n        }\r\n      }\r\n      createShaderPass() {\r\n        this.advection = new Advection({\r\n          cellScale: this.cellScale,\r\n          fboSize: this.fboSize,\r\n          dt: this.options.dt,\r\n          src: this.fbos.vel_0,\r\n          dst: this.fbos.vel_1\r\n        });\r\n        this.externalForce = new ExternalForce({\r\n          cellScale: this.cellScale,\r\n          cursor_size: this.options.cursor_size,\r\n          dst: this.fbos.vel_1\r\n        });\r\n        this.viscous = new Viscous({\r\n          cellScale: this.cellScale,\r\n          boundarySpace: this.boundarySpace,\r\n          viscous: this.options.viscous,\r\n          src: this.fbos.vel_1,\r\n          dst: this.fbos.vel_viscous1,\r\n          dst_: this.fbos.vel_viscous0,\r\n          dt: this.options.dt\r\n        });\r\n        this.divergence = new Divergence({\r\n          cellScale: this.cellScale,\r\n          boundarySpace: this.boundarySpace,\r\n          src: this.fbos.vel_viscous0,\r\n          dst: this.fbos.div,\r\n          dt: this.options.dt\r\n        });\r\n        this.poisson = new Poisson({\r\n          cellScale: this.cellScale,\r\n          boundarySpace: this.boundarySpace,\r\n          src: this.fbos.div,\r\n          dst: this.fbos.pressure_1,\r\n          dst_: this.fbos.pressure_0\r\n        });\r\n        this.pressure = new Pressure({\r\n          cellScale: this.cellScale,\r\n          boundarySpace: this.boundarySpace,\r\n          src_p: this.fbos.pressure_0,\r\n          src_v: this.fbos.vel_viscous0,\r\n          dst: this.fbos.vel_0,\r\n          dt: this.options.dt\r\n        });\r\n      }\r\n      calcSize() {\r\n        const width = Math.max(1, Math.round(this.options.resolution * Common.width));\r\n        const height = Math.max(1, Math.round(this.options.resolution * Common.height));\r\n        this.cellScale.set(1 / width, 1 / height);\r\n        this.fboSize.set(width, height);\r\n      }\r\n      resize() {\r\n        this.calcSize();\r\n        for (const key in this.fbos) {\r\n          this.fbos[key]!.setSize(this.fboSize.x, this.fboSize.y);\r\n        }\r\n      }\r\n      update() {\r\n        if (this.options.isBounce) this.boundarySpace.set(0, 0);\r\n        else this.boundarySpace.copy(this.cellScale);\r\n        this.advection.update({ dt: this.options.dt, isBounce: this.options.isBounce, BFECC: this.options.BFECC });\r\n        this.externalForce.update({\r\n          cursor_size: this.options.cursor_size,\r\n          mouse_force: this.options.mouse_force,\r\n          cellScale: this.cellScale\r\n        });\r\n        let vel: any = this.fbos.vel_1;\r\n        if (this.options.isViscous) {\r\n          vel = this.viscous.update({\r\n            viscous: this.options.viscous,\r\n            iterations: this.options.iterations_viscous,\r\n            dt: this.options.dt\r\n          });\r\n        }\r\n        this.divergence.update({ vel });\r\n        const pressure = this.poisson.update({ iterations: this.options.iterations_poisson });\r\n        this.pressure.update({ vel, pressure });\r\n      }\r\n    }\r\n\r\n    class Output {\r\n      simulation: Simulation;\r\n      scene: THREE.Scene;\r\n      camera: THREE.Camera;\r\n      output: THREE.Mesh;\r\n      constructor() {\r\n        this.simulation = new Simulation();\r\n        this.scene = new THREE.Scene();\r\n        this.camera = new THREE.Camera();\r\n        this.output = new THREE.Mesh(\r\n          new THREE.PlaneGeometry(2, 2),\r\n          new THREE.RawShaderMaterial({\r\n            vertexShader: face_vert,\r\n            fragmentShader: color_frag,\r\n            transparent: true,\r\n            depthWrite: false,\r\n            uniforms: {\r\n              velocity: { value: this.simulation.fbos.vel_0!.texture },\r\n              boundarySpace: { value: new THREE.Vector2() },\r\n              palette: { value: paletteTex },\r\n              bgColor: { value: bgVec4 }\r\n            }\r\n          })\r\n        );\r\n        this.scene.add(this.output);\r\n      }\r\n      resize() {\r\n        this.simulation.resize();\r\n      }\r\n      render() {\r\n        if (!Common.renderer) return;\r\n        Common.renderer.setRenderTarget(null);\r\n        Common.renderer.render(this.scene, this.camera);\r\n      }\r\n      update() {\r\n        this.simulation.update();\r\n        this.render();\r\n      }\r\n    }\r\n\r\n    class WebGLManager implements LiquidEtherWebGL {\r\n      props: any;\r\n      output!: Output;\r\n      autoDriver?: AutoDriver;\r\n      lastUserInteraction = performance.now();\r\n      running = false;\r\n      private _loop = this.loop.bind(this);\r\n      private _resize = this.resize.bind(this);\r\n      private _onVisibility?: () => void;\r\n      constructor(props: any) {\r\n        this.props = props;\r\n        Common.init(props.$wrapper);\r\n        Mouse.init(props.$wrapper);\r\n        Mouse.autoIntensity = props.autoIntensity;\r\n        Mouse.takeoverDuration = props.takeoverDuration;\r\n        Mouse.onInteract = () => {\r\n          this.lastUserInteraction = performance.now();\r\n          if (this.autoDriver) this.autoDriver.forceStop();\r\n        };\r\n        this.autoDriver = new AutoDriver(Mouse, this as any, {\r\n          enabled: props.autoDemo,\r\n          speed: props.autoSpeed,\r\n          resumeDelay: props.autoResumeDelay,\r\n          rampDuration: props.autoRampDuration\r\n        });\r\n        this.init();\r\n        window.addEventListener('resize', this._resize);\r\n        this._onVisibility = () => {\r\n          const hidden = document.hidden;\r\n          if (hidden) {\r\n            this.pause();\r\n          } else if (isVisibleRef.current) {\r\n            this.start();\r\n          }\r\n        };\r\n        document.addEventListener('visibilitychange', this._onVisibility);\r\n      }\r\n      init() {\r\n        if (!Common.renderer) return;\r\n        this.props.$wrapper.prepend(Common.renderer.domElement);\r\n        this.output = new Output();\r\n      }\r\n      resize() {\r\n        Common.resize();\r\n        this.output.resize();\r\n      }\r\n      render() {\r\n        if (this.autoDriver) this.autoDriver.update();\r\n        Mouse.update();\r\n        Common.update();\r\n        this.output.update();\r\n      }\r\n      loop() {\r\n        if (!this.running) return;\r\n        this.render();\r\n        rafRef.current = requestAnimationFrame(this._loop);\r\n      }\r\n      start() {\r\n        if (this.running) return;\r\n        this.running = true;\r\n        this._loop();\r\n      }\r\n      pause() {\r\n        this.running = false;\r\n        if (rafRef.current) {\r\n          cancelAnimationFrame(rafRef.current);\r\n          rafRef.current = null;\r\n        }\r\n      }\r\n      dispose() {\r\n        try {\r\n          window.removeEventListener('resize', this._resize);\r\n          if (this._onVisibility) document.removeEventListener('visibilitychange', this._onVisibility);\r\n          Mouse.dispose();\r\n          if (Common.renderer) {\r\n            const canvas = Common.renderer.domElement;\r\n            if (canvas && canvas.parentNode) canvas.parentNode.removeChild(canvas);\r\n            Common.renderer.dispose();\r\n          }\r\n        } catch {\r\n          /* noop */\r\n        }\r\n      }\r\n    }\r\n\r\n    const container = mountRef.current;\r\n    container.style.position = container.style.position || 'relative';\r\n    container.style.overflow = container.style.overflow || 'hidden';\r\n\r\n    const webgl = new WebGLManager({\r\n      $wrapper: container,\r\n      autoDemo,\r\n      autoSpeed,\r\n      autoIntensity,\r\n      takeoverDuration,\r\n      autoResumeDelay,\r\n      autoRampDuration\r\n    });\r\n    webglRef.current = webgl;\r\n\r\n    const applyOptionsFromProps = () => {\r\n      if (!webglRef.current) return;\r\n      const sim = webglRef.current.output?.simulation;\r\n      if (!sim) return;\r\n      const prevRes = sim.options.resolution;\r\n      Object.assign(sim.options, {\r\n        mouse_force: mouseForce,\r\n        cursor_size: cursorSize,\r\n        isViscous,\r\n        viscous,\r\n        iterations_viscous: iterationsViscous,\r\n        iterations_poisson: iterationsPoisson,\r\n        dt,\r\n        BFECC,\r\n        resolution,\r\n        isBounce\r\n      });\r\n      if (resolution !== prevRes) sim.resize();\r\n    };\r\n    applyOptionsFromProps();\r\n    webgl.start();\r\n\r\n    const io = new IntersectionObserver(\r\n      entries => {\r\n        const entry = entries[0];\r\n        const isVisible = entry.isIntersecting && entry.intersectionRatio > 0;\r\n        isVisibleRef.current = isVisible;\r\n        if (!webglRef.current) return;\r\n        if (isVisible && !document.hidden) {\r\n          webglRef.current.start();\r\n        } else {\r\n          webglRef.current.pause();\r\n        }\r\n      },\r\n      { threshold: [0, 0.01, 0.1] }\r\n    );\r\n    io.observe(container);\r\n    intersectionObserverRef.current = io;\r\n\r\n    const ro = new ResizeObserver(() => {\r\n      if (!webglRef.current) return;\r\n      if (resizeRafRef.current) cancelAnimationFrame(resizeRafRef.current);\r\n      resizeRafRef.current = requestAnimationFrame(() => {\r\n        if (!webglRef.current) return;\r\n        webglRef.current.resize();\r\n      });\r\n    });\r\n    ro.observe(container);\r\n    resizeObserverRef.current = ro;\r\n\r\n    return () => {\r\n      if (rafRef.current) cancelAnimationFrame(rafRef.current);\r\n      if (resizeObserverRef.current) {\r\n        try {\r\n          resizeObserverRef.current.disconnect();\r\n        } catch {\r\n          /* noop */\r\n        }\r\n      }\r\n      if (intersectionObserverRef.current) {\r\n        try {\r\n          intersectionObserverRef.current.disconnect();\r\n        } catch {\r\n          /* noop */\r\n        }\r\n      }\r\n      if (webglRef.current) {\r\n        webglRef.current.dispose();\r\n      }\r\n      webglRef.current = null;\r\n    };\r\n  }, [\r\n    BFECC,\r\n    cursorSize,\r\n    dt,\r\n    isBounce,\r\n    isViscous,\r\n    iterationsPoisson,\r\n    iterationsViscous,\r\n    mouseForce,\r\n    resolution,\r\n    viscous,\r\n    colors,\r\n    autoDemo,\r\n    autoSpeed,\r\n    autoIntensity,\r\n    takeoverDuration,\r\n    autoResumeDelay,\r\n    autoRampDuration\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const webgl = webglRef.current;\r\n    if (!webgl) return;\r\n    const sim = webgl.output?.simulation;\r\n    if (!sim) return;\r\n    const prevRes = sim.options.resolution;\r\n    Object.assign(sim.options, {\r\n      mouse_force: mouseForce,\r\n      cursor_size: cursorSize,\r\n      isViscous,\r\n      viscous,\r\n      iterations_viscous: iterationsViscous,\r\n      iterations_poisson: iterationsPoisson,\r\n      dt,\r\n      BFECC,\r\n      resolution,\r\n      isBounce\r\n    });\r\n    if (webgl.autoDriver) {\r\n      webgl.autoDriver.enabled = autoDemo;\r\n      webgl.autoDriver.speed = autoSpeed;\r\n      webgl.autoDriver.resumeDelay = autoResumeDelay;\r\n      webgl.autoDriver.rampDurationMs = autoRampDuration * 1000;\r\n      if (webgl.autoDriver.mouse) {\r\n        webgl.autoDriver.mouse.autoIntensity = autoIntensity;\r\n        webgl.autoDriver.mouse.takeoverDuration = takeoverDuration;\r\n      }\r\n    }\r\n    if (resolution !== prevRes) sim.resize();\r\n  }, [\r\n    mouseForce,\r\n    cursorSize,\r\n    isViscous,\r\n    viscous,\r\n    iterationsViscous,\r\n    iterationsPoisson,\r\n    dt,\r\n    BFECC,\r\n    resolution,\r\n    isBounce,\r\n    autoDemo,\r\n    autoSpeed,\r\n    autoIntensity,\r\n    takeoverDuration,\r\n    autoResumeDelay,\r\n    autoRampDuration\r\n  ]);\r\n\r\n  return (\r\n    <div\r\n      ref={mountRef}\r\n      className={`w-full h-full relative overflow-hidden pointer-events-none touch-none ${className || ''}`}\r\n      style={style}\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1407, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chris/OneDrive/Desktop/pleasegod/my-next-app/app/components/Dictaphone.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport SpeechRecognition, { useSpeechRecognition } from \"react-speech-recognition\";\r\nimport { useEffect } from \"react\";\r\n\r\ninterface DictaphoneProps {\r\n  appendToMessage: (text: string) => void; // new prop\r\n}\r\n\r\nconst Dictaphone: React.FC<DictaphoneProps> = ({ appendToMessage }) => {\r\n  const { transcript, listening, resetTranscript, browserSupportsSpeechRecognition } =\r\n    useSpeechRecognition();\r\n\r\n  // Whenever transcript changes, append it to the parent textarea\r\n  useEffect(() => {\r\n    appendToMessage(transcript); // overwrite textarea with latest transcript\r\n  }, [transcript, appendToMessage]);\r\n\r\n  if (!browserSupportsSpeechRecognition) {\r\n    return <span>Browser doesn't support speech recognition.</span>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center gap-3 w-full mt-2\">\r\n      <p className=\"text-sm text-gray-300\">Microphone: {listening ? \"on 🎙️\" : \"off 🔇\"}</p>\r\n      <div className=\"flex gap-2\">\r\n        <button\r\n          onClick={() =>\r\n            SpeechRecognition.startListening({ continuous: true, language: \"en-US\" })\r\n          }\r\n          className=\"px-4 py-2 bg-linear-to-r from-purple-500 to-pink-500 rounded-lg text-white font-semibold hover:opacity-90 transition-all\"\r\n        >\r\n          Start\r\n        </button>\r\n        <button\r\n          onClick={() => SpeechRecognition.stopListening()}\r\n          className=\"px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-all\"\r\n        >\r\n          Stop\r\n        </button>\r\n        <button\r\n          onClick={resetTranscript}\r\n          className=\"px-4 py-2 bg-pink-600 rounded-lg hover:bg-pink-500 transition-all\"\r\n        >\r\n          Reset\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dictaphone;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AASA,MAAM,aAAwC,CAAC,EAAE,eAAe,EAAE;;IAChE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,eAAe,EAAE,gCAAgC,EAAE,GAChF,IAAA,0LAAoB;IAEtB,gEAAgE;IAChE,IAAA,0KAAS;gCAAC;YACR,gBAAgB,aAAa,4CAA4C;QAC3E;+BAAG;QAAC;QAAY;KAAgB;IAEhC,IAAI,CAAC,kCAAkC;QACrC,qBAAO,6LAAC;sBAAK;;;;;;IACf;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAE,WAAU;;oBAAwB;oBAAa,YAAY,WAAW;;;;;;;0BACzE,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,SAAS,IACP,6KAAiB,CAAC,cAAc,CAAC;gCAAE,YAAY;gCAAM,UAAU;4BAAQ;wBAEzE,WAAU;kCACX;;;;;;kCAGD,6LAAC;wBACC,SAAS,IAAM,6KAAiB,CAAC,aAAa;wBAC9C,WAAU;kCACX;;;;;;kCAGD,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT;GAxCM;;QAEF,0LAAoB;;;KAFlB;uCA0CS","debugId":null}},
    {"offset": {"line": 1516, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chris/OneDrive/Desktop/pleasegod/my-next-app/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport FileDropzone from \"./components/FileDropzone\";\nimport LiquidEther from \"./components/Background\";\nimport Dictaphone from \"./components/Dictaphone\";\nimport Image from \"next/image\";\nimport { useRef, useEffect, useState } from \"react\";\n\nexport default function Home() {\n  const learnMoreRef = useRef<HTMLDivElement | null>(null);\n  const [message, setMessage] = useState(\"\");\n  const [response, setResponse] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [htmlString, setHtmlString] = useState(\"\");\n  const [showHtml, setShowHtml] = useState(false);\n  const [htmlUrl, setHtmlUrl] = useState(\"\");\n\n  // Update HTML preview URL when htmlString changes\n  useEffect(() => {\n    if (!htmlString) return;\n    const blob = new Blob([htmlString], { type: \"text/html\" });\n    const url = URL.createObjectURL(blob);\n    setHtmlUrl(url);\n    return () => URL.revokeObjectURL(url);\n  }, [htmlString]);\n\n  // Create session for AI agent\n  const createSession = async () => {\n    const appName = \"lead_agent\";\n    const userId = \"u_123\";\n    const sessionId = crypto.randomUUID();\n    const url = `http://localhost:8000/apps/${appName}/users/${userId}/sessions/${sessionId}`;\n    const payload = { state: { key1: \"value1\", key2: 42 } };\n\n    try {\n      const res = await fetch(url, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload),\n      });\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      console.log(\"Session created!\");\n    } catch (err) {\n      console.error(\"Failed to create session:\", err);\n    }\n\n    return sessionId;\n  };\n\n  // Prompt AI agent\n  const promptAgent = async () => {\n    setLoading(true);\n    try {\n      const id = await createSession();\n\n      const url = \"http://localhost:8000/run\";\n      const payload = {\n        app_name: \"lead_agent\",\n        user_id: \"u_123\",\n        session_id: id,\n        new_message: { role: \"user\", parts: [{ text: message }] },\n      };\n\n      const res = await fetch(url, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload),\n      });\n      const data = await res.json();\n      const htmlOutput = data[2].content.parts[0].text;\n      setResponse(htmlOutput);\n      setHtmlString(htmlOutput);\n      setShowHtml(true);\n    } catch (err) {\n      console.error(\"Error calling AI agent:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle MP3/MP4 file selection for transcription\n  const handleFileSelect = async (file: File) => {\n    setLoading(true);\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n\n      const res = await fetch(\"/api/transcribe\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      const data = await res.json();\n      // Append transcription to existing textarea content\n      setMessage((prev) => (prev ? prev + \" \" + data.text : data.text));\n    } catch (err) {\n      console.error(\"Transcription failed:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const scrollToLearnMore = () => {\n    learnMoreRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  return (\n    <main className=\"relative flex flex-col items-center justify-center min-h-screen w-full text-center p-8 overflow-hidden\">\n      {/* Background */}\n      <div className=\"absolute inset-0 -z-10\">\n        <LiquidEther\n          className=\"absolute top-0 left-0 w-full h-full -z-10\"\n          colors={[\"#5227FF\", \"#FF9FFC\", \"#B19EEF\"]}\n          mouseForce={20}\n          cursorSize={100}\n          isViscous={false}\n          viscous={30}\n          iterationsViscous={32}\n          iterationsPoisson={32}\n          resolution={0.5}\n          isBounce={false}\n          autoDemo\n          autoSpeed={0.5}\n          autoIntensity={2.2}\n          takeoverDuration={0.25}\n          autoResumeDelay={1000}\n          autoRampDuration={0.6}\n        />\n      </div>\n\n      {/* Loading Overlay */}\n      {loading && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm\">\n          <div className=\"w-16 h-16 border-4 border-white/30 border-t-white rounded-full animate-spin\"></div>\n        </div>\n      )}\n\n      {/* Main Container */}\n      <div className=\"flex flex-col md:flex-row items-center justify-between w-full max-w-6xl gap-10 bg-black/40 backdrop-blur-xl rounded-3xl p-10 border border-white/10 shadow-2xl\">\n        {/* Left Content */}\n        <div className=\"flex-1 text-left text-white \">\n          <h1 className=\"text-5xl font-extrabold bg-linear-to-r from-purple-300 to-pink-400 space-y-6 bg-clip-text text-transparent leading-tight\">\n            Presentations Made Easy with AI\n          </h1>\n          <p className=\"text-lg text-gray-200 leading-relaxed mt-4\">\n            Transform your text, story, or even audio into a beautiful\n          </p>\n          <p className=\"text-2xl  font-extrabold text-purple-300 leading-relaxed\">\n            AI-generated presentations\n          </p>\n          <p className=\"text-lg text-gray-200 leading-relaxed mt-2\">\n            Just type your story or utilize your microphone to populate the box on the right and we’ll handle the rest!\n          </p>\n          <div className=\"pt-4\">\n            <button\n              onClick={scrollToLearnMore}\n              className=\"px-6 py-3 bg-linear-to-r from-purple-500 to-pink-500 rounded-xl text-white font-semibold shadow-lg hover:opacity-90 transition-all duration-300\"\n            >\n              Learn More\n            </button>\n          </div>\n        </div>\n\n        {/* Right Content */}\n        <div className=\"flex-1 flex flex-col items-center gap-4\">\n          {/* Dropzone for file upload */}\n          <FileDropzone\n            onFileSelect={(file) => console.log(\"Selected file:\", file)}\n            onFileTranscribed={(text) => setMessage(text)}\n          />\n\n          {/* AI Prompt Button */}\n          <button\n            onClick={promptAgent}\n            className=\"bg-white text-black rounded-xl p-2 font-semibold hover:bg-gray-200 transition-all\"\n          >\n            Enter\n          </button>\n\n          {/* Unified Textarea */}\n          <textarea\n            placeholder=\"Enter instructions or preferences for your presentation...\"\n            className=\"w-full mt-4 p-4 rounded-2xl bg-pink-50/20 border border-pink-400 placeholder-pink-200 text-white focus:ring-2 focus:ring-pink-400 focus:outline-none transition-colors\"\n            rows={4}\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n          />\n\n          {/* Microphone Input */}\n          <Dictaphone appendToMessage={(text) => setMessage(text)} />\n\n          {/* Generated HTML Links */}\n          {htmlUrl && (\n            <div className=\"mt-4 flex gap-4\">\n              <a\n                href={htmlUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-all\"\n              >\n                Open Generated Slideshow\n              </a>\n              <a\n                href={htmlUrl}\n                download=\"generated.html\"\n                className=\"px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-all\"\n              >\n                Download Slideshow\n              </a>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Learn More Section */}\n      <section\n        ref={learnMoreRef}\n        className=\"flex flex-col md:flex-row items-center justify-between w-full max-w-6xl mt-32 bg-black/40 backdrop-blur-xl rounded-3xl p-10 border border-white/10 shadow-2xl scroll-mt-24\"\n      >\n        <div className=\"flex-1 text-left text-white space-y-6\">\n          <h2 className=\"text-4xl font-bold bg-linear-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent\">\n            How It Works\n          </h2>\n          <p className=\"text-lg text-gray-300 leading-relaxed\">\n            Upload your audio or video file, and our app will automatically\n            extract key points, generate slides, and create a polished\n            presentation saving you hours of work. By utilizing Google's\n            advanced A2A AI agent etc...\n          </p>\n        </div>\n\n        <div className=\"flex-1 flex justify-center mt-8 md:mt-0\">\n          <Image\n            src=\"/A2A.png\"\n            alt=\"A2A photo\"\n            width={400}\n            height={300}\n            className=\"rounded-2xl shadow-lg border-2 border-pink-500\"\n          />\n        </div>\n      </section>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}